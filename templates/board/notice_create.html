{% extends "base.html" %}
{% load static %}

{% block title %}ê³µì§€ì‚¬í•­ ì‘ì„± | DORO LMS{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/notice_create.css' %}">
{% endblock %}

{% block content %}
<div id="canvas" class="notice-admin-update">

  <!-- ğŸ¨ Hero : ê³µì§€ì‚¬í•­ -->
  <section class="hero hero--notice">
    <div class="hero__inner">
      <h1 class="hero__title">ê³µì§€ì‚¬í•­</h1>
      <p class="hero__subtitle">
        ê´€ë¦¬ì ê³µì§€ ì‘ì„± í™”ë©´ì…ë‹ˆë‹¤. ê³µì§€/ì ê²€ ìœ í˜•ê³¼ ëŒ€ìƒì„ ì„ íƒí•˜ê³  ë‚´ìš©ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”.
      </p>
    </div>
  </section>

  <!-- ğŸ“„ ê³µì§€ ì‘ì„± ì¹´ë“œ -->
  <main class="notice-update-layout" role="main" aria-label="ê³µì§€ ì‘ì„±">
    <section class="card notice-update-card">

      <header class="notice-update-card__header">
        <h2 class="notice-update-card__title">ê³µì§€ ì‘ì„±</h2>
      </header>

      <form method="post" class="notice-update-form">
        {% csrf_token %}

        {% if form.non_field_errors %}
        <div style="margin-bottom:12px; color:#DC2626; font-size:13px;">
          {% for err in form.non_field_errors %}
            <div>{{ err }}</div>
          {% endfor %}
        </div>
        {% endif %}

        <!-- 1ì¤„: ê³µì§€/ì ê²€ + ëŒ€ìƒ + ì œëª© -->
        <div class="notice-update-row">

          <!-- ê³µì§€/ì ê²€ ì„ íƒ (UIìš©) -->
          <div class="field-group">
            <label for="notice_type" class="field-label">ë¶„ë¥˜</label>
            <select id="notice_type" name="notice_type" class="field-control field-select">
              <option value="NOTICE">ê³µì§€</option>
              <option value="MAINT">ì ê²€</option>
            </select>
          </div>

          <!-- ì „ì²´/í•™ìƒ/ê°•ì‚¬ ì„ íƒ (UIìš©) -->
          <div class="field-group">
            <label for="notice_target" class="field-label">ëŒ€ìƒ</label>
            <select id="notice_target" name="notice_target" class="field-control field-select">
              <option value="ALL">ì „ì²´</option>
              <option value="STUDENT">í•™ìƒ</option>
              <option value="TEACHER">ê°•ì‚¬</option>
            </select>
          </div>

          <!-- ì œëª© ì…ë ¥ -->
          <div class="field-group field-group--grow">
            <label for="notice_title" class="field-label">ì œëª©</label>
            <input
              id="notice_title"
              name="title"
              type="text"
              class="field-control field-input"
              placeholder="ê³µì§€ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”."
              value="{{ form.title.value|default_if_none:'' }}"
            >
            {% if form.title.errors %}
              <div style="color:#DC2626; font-size:12px; margin-top:4px;">
                {% for err in form.title.errors %}{{ err }}{% endfor %}
              </div>
            {% endif %}
          </div>
        </div>

        <!-- 2ì¤„: í¸ì§‘ê¸° ì˜ì—­ (íˆ´ë°” + ë³¸ë¬¸) -->
        <div class="editor-shell">
          <div class="editor-toolbar">
            <div class="editor-toolbar__left" aria-hidden="true">
              <img src="{% static 'img/editor_toolbar_sample.png' %}"
                   alt=""
                   class="editor-toolbar__img">
            </div>
          </div>

          <textarea
            id="notice_content"
            name="content"
            class="editor-body"
            placeholder="ê³µì§€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”."
          >{{ form.content.value|default_if_none:'' }}</textarea>
        </div>
        {% if form.content.errors %}
          <div style="color:#DC2626; font-size:12px; margin-top:4px;">
            {% for err in form.content.errors %}{{ err }}{% endfor %}
          </div>
        {% endif %}

        <!-- ìƒë‹¨ ê³ ì • ì²´í¬ -->
        <div style="margin-top:12px;">
          <label style="display:flex; align-items:center; gap:8px; font-size:14px;">
            <input type="checkbox"
                   name="is_pinned"
                   {% if form.is_pinned.value %}checked{% endif %}>
            <span>ìƒë‹¨ ê³ ì •</span>
          </label>
          {% if form.is_pinned.errors %}
            <div style="color:#DC2626; font-size:12px; margin-top:4px;">
              {% for err in form.is_pinned.errors %}{{ err }}{% endfor %}
            </div>
          {% endif %}
        </div>

        <!-- í•˜ë‹¨ ë²„íŠ¼ -->
        <div class="notice-update-footer">
          <a href="{% url 'board:notice_list' %}"
             class="btn-primary"
             style="background:#6B7280; margin-right:8px;">
            ì·¨ì†Œ
          </a>
          <button type="submit" class="btn-primary notice-update__submit">
            ì‘ì„± ì™„ë£Œ
          </button>
        </div>
      </form>
    </section>
  </main>

  <!-- ğŸ“Œ ìš°ì¸¡ ê³ ì • ë°°ë„ˆ -->
  <aside class="support-banner" aria-label="ê³ ê°ì§€ì› ë°”ë¡œê°€ê¸°">
    <button type="button" class="support-banner__item">
      <span class="support-banner__icon support-banner__icon--chat"></span>
      <span class="support-banner__label">ì±—ë´‡<br>ë°”ë¡œê°€ê¸°</span>
    </button>
    <button type="button" class="support-banner__item">
      <span class="support-banner__icon support-banner__icon--phone"></span>
      <span class="support-banner__label">ìƒë‹´ ì „í™”<br>ë°”ë¡œê°€ê¸°</span>
    </button>
    <button type="button" class="support-banner__item">
      <span class="support-banner__icon support-banner__icon--qna"></span>
      <span class="support-banner__label">1:1 ë¬¸ì˜<br>ë°”ë¡œê°€ê¸°</span>
    </button>
  </aside>

</div>
{% endblock %}
